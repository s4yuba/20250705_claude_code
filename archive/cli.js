grep "MAX_THINKING_TOKENS" *
cli.js:`,value:"console"}],onCancel:()=>{},onChange:(S)=>{if(Z({state:"ready_to_start"}),S==="claudeai")E1("tengu_oauth_claudeai_selected",{}),V(!0);else E1("tengu_oauth_console_selected",{}),V(!1)}})));case"waiting_for_login":return HB.default.createElement(v,{flexDirection:"column",gap:1},I&&HB.default.createElement(v,null,HB.default.createElement(P,{dimColor:!0},I)),!K&&HB.default.createElement(v,null,HB.default.createElement($G,null),HB.default.createElement(P,null,"Opening browser to sign in…")),K&&HB.default.createElement(v,null,HB.default.createElement(P,null,fv2),HB.default.createElement(C8,{value:F,onChange:Y,onSubmit:(S)=>R(S,G.url),cursorOffset:W,onChangeCursorOffset:C,columns:q})));case"creating_api_key":return HB.default.createElement(v,{flexDirection:"column",gap:1},HB.default.createElement(v,null,HB.default.createElement($G,null),HB.default.createElement(P,null,"Creating API key for Claude Code…")));case"about_to_retry":return HB.default.createElement(v,{flexDirection:"column",gap:1},HB.default.createElement(P,{color:"permission"},"Retrying…"));case"success":return HB.default.createElement(v,{flexDirection:"column",gap:2},WA().oauthAccount?.emailAddress?HB.default.createElement(P,{dimColor:!0},"Logged in as"," ",HB.default.createElement(P,null,WA().oauthAccount?.emailAddress)):null,HB.default.createElement(P,{color:"success"},"Login successful. Press ",HB.default.createElement(P,{bold:!0},"Enter")," to continue…"));case"error":return HB.default.createElement(v,{flexDirection:"column",gap:1},HB.default.createElement(P,{color:"error"},"OAuth error: ",G.message),G.toRetry&&HB.default.createElement(v,{marginTop:1},HB.default.createElement(P,{color:"permission"},"Press ",HB.default.createElement(P,{bold:!0},"Enter")," to retry.")));default:return null}}return HB.useEffect(()=>{let S={};if(S.header=HB.default.createElement(v,{key:"header",flexDirection:"column",gap:1},HB.default.createElement(g9A,null),HB.default.createElement(v,{paddingBottom:1,paddingLeft:1},HB.default.createElement(Pv2,null))),G.state==="waiting_for_login"&&K)S.urlToCopy=HB.default.createElement(v,{flexDirection:"column",key:"urlToCopy",gap:1,paddingBottom:1},HB.default.createElement(v,{paddingX:1},HB.default.createElement(P,{dimColor:!0},"Browser didn't open? Use the url below to sign in:")),HB.default.createElement(v,{width:1000},HB.default.createElement(P,{dimColor:!0},G.url)));w.renderStatic(S)},[w,G,K]),HB.default.createElement(v,{flexDirection:"column",gap:1},HB.default.createElement(v,{paddingLeft:1,flexDirection:"column",gap:1},L()))}var q9=Z1(U1(),1);var gj6=53;function Yp({model:A}){let B=eZ(process.env.IS_DEMO)?29:Math.max(gj6,dA().length+12),Q=sI(!1),{columns:D}=eB(),I=D<B,G=Boolean(process.env.ANTHROPIC_API_KEY&&MpA(process.env.ANTHROPIC_API_KEY)),Z=eZ(process.env.DISABLE_PROMPT_CACHING),F=nz0(A),Y=null,W=Boolean(G||Z||process.env.API_TIMEOUT_MS||process.env.MAX_THINKING_TOKENS||process.env.ANTHROPIC_BASE_URL);return q9.createElement(v,{flexDirection:"column"},q9.createElement(v,{...I?{}:{borderColor:"claude",borderStyle:"round"},flexDirection:"column",gap:1,paddingLeft:1,width:B},q9.createElement(P,null,q9.createElement(P,{color:"claude"},"✻")," Welcome to"," ",q9.createElement(P,{bold:!0},A2),"!"),process.env.IS_DEMO?null:q9.createElement(q9.Fragment,null,q9.createElement(v,{paddingLeft:2,flexDirection:"column",gap:1},q9.createElement(P,{color:"secondaryText",italic:!0},"/help for help, /status for your current setup"),q9.createElement(P,{color:"secondaryText"},"cwd: ",dA()),!1,!1),W&&q9.createElement(v,{borderColor:"secondaryBorder",borderStyle:"single",borderBottom:!1,borderLeft:!1,borderRight:!1,borderTop:!0,flexDirection:"column",marginLeft:2,marginRight:1,paddingTop:1},q9.createElement(v,{marginBottom:1},q9.createElement(P,{color:"secondaryText"},"Overrides (via env):")),G&&Q?q9.createElement(P,{color:"secondaryText"},"• API Key:"," ",q9.createElement(P,{bold:!0},Q.length<25?`${Q.slice(0,3)}…`:`sk-ant-…${Q.slice(-B+25)}`)):null,Z?q9.createElement(P,{color:"secondaryText"},"• Prompt caching:"," ",q9.createElement(P,{color:"error",bold:!0},"off")):null,process.env.API_TIMEOUT_MS?q9.createElement(P,{color:"secondaryText"},"• API timeout:"," ",q9.createElement(P,{bold:!0},process.env.API_TIMEOUT_MS,"ms")):null,process.env.MAX_THINKING_TOKENS?q9.createElement(P,{color:"secondaryText"},"• Max thinking tokens:"," ",q9.createElement(P,{bold:!0},process.env.MAX_THINKING_TOKENS)):null,process.env.ANTHROPIC_BASE_URL?q9.createElement(P,{color:"secondaryText"},"• API Base URL:"," ",q9.createElement(P,{bold:!0},process.env.ANTHROPIC_BASE_URL)):null))))}var vv2=Z1(U1(),1);function Wp(){let[{mainLoopModel:A,maxRateLimitFallbackActive:B}]=i6();return vv2.useMemo(()=>{if(A===null){if(B)return ZX();return as()}return Qu(A)},[A,B])}var bv2=()=>({type:"local-jsx",name:"login",description:sI(!1)?"Switch Anthropic accounts":"Sign in with your Anthropic account",isEnabled:()=>!0,isHidden:!1,async call(A,B){return await u8(),wI.createElement(u9A,{onDone:async(Q,D)=>{s01(wI.createElement(Yp,{model:D})),B.onChangeAPIKey(),A(Q?"Login successful":"Login interrupted")}})},userFacingName(){return"login"}});function u9A(A){let B=Wp(),Q=Y2(()=>A.onDone(!1,B));return wI.createElement(v,{flexDirection:"column"},wI.createElement(zw1,{onDone:()=>A.onDone(!0,B),startingMessage:A.startingMessage}),wI.createElement(v,{marginLeft:3},wI.createElement(P,{dimColor:!0},Q.pending?wI.createElement(wI.Fragment,null,"Press ",Q.keyName," again to exit"):"")))}var s7=Z1(U1(),1);import{execSync as Uw1}from"child_process";var gv2=Z1(U1(),1);function hv2(){return gv2.default.createElement(P,null,"Checking GitHub CLI installation…")}var LG=Z1(U1(),1);function uv2({currentRepo:A,useCurrentRepo:B,repoUrl:Q,onRepoUrlChange:D,onSubmit:I,onToggleUseCurrentRepo:G}){let[Z,F]=LG.useState(0),W=eB().columns;return X0((C,J)=>{if(J.upArrow)G(!0);else if(J.downArrow)G(!1);else if(J.return)I()}),LG.default.createElement(LG.default.Fragment,null,LG.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},LG.default.createElement(v,{flexDirection:"column",marginBottom:1},LG.default.createElement(P,{bold:!0},"Install GitHub App"),LG.default.createElement(P,{dimColor:!0},"Select GitHub repository")),A&&LG.default.createElement(v,{marginBottom:1},LG.default.createElement(P,{bold:B,color:B?"permission":void 0},B?"> ":"  ","Use current repository: ",A)),LG.default.createElement(v,{marginBottom:1},LG.default.createElement(P,{bold:!B||!A,color:!B||!A?"permission":void 0},!B||!A?"> ":"  ","Enter a different repository")),(!B||!A)&&LG.default.createElement(v,{marginBottom:1},LG.default.createElement(C8,{value:Q,onChange:D,onSubmit:I,focus:!0,placeholder:"owner/repo or https://github.com/owner/repo",columns:W,cursorOffset:Z,onChangeCursorOffset:F,showCursor:!0}))),LG.default.createElement(v,{marginLeft:3},LG.default.createElement(P,{dimColor:!0},A?"↑/↓ to select · ":"","Enter to continue")))}var mC=Z1(U1(),1);function mv2({repoUrl:A,onSubmit:B}){return X0((Q,D)=>{if(D.return)B()}),mC.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},mC.default.createElement(v,{flexDirection:"column",marginBottom:1},mC.default.createElement(P,{bold:!0},"Install the Claude GitHub App")),mC.default.createElement(v,{marginBottom:1},mC.default.createElement(P,null,"Opening browser to install the Claude GitHub App…")),mC.default.createElement(v,{marginBottom:1},mC.default.createElement(P,null,"Please install the app for repository: ",mC.default.createElement(P,{bold:!0},A))),mC.default.createElement(v,{marginBottom:1},mC.default.createElement(P,{dimColor:!0},"Important: Make sure to grant access to this specific repository")),mC.default.createElement(v,null,mC.default.createElement(P,{bold:!0,color:"permission"},"Press Enter once you've installed the app",oA.ellipsis)))}var d8=Z1(U1(),1);function dv2({useExistingSecret:A,secretName:B,onToggleUseExistingSecret:Q,onSecretNameChange:D,onSubmit:I}){let[G,Z]=d8.useState(0),F=eB(),[Y]=hB();return X0((W,C)=>{if(C.upArrow)Q(!0);else if(C.downArrow)Q(!1);else if(C.return)I()}),d8.default.createElement(d8.default.Fragment,null,d8.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},d8.default.createElement(v,{flexDirection:"column",marginBottom:1},d8.default.createElement(P,{bold:!0},"Install GitHub App"),d8.default.createElement(P,{dimColor:!0},"Setup API key secret")),d8.default.createElement(v,{marginBottom:1},d8.default.createElement(P,{color:"warning"},"ANTHROPIC_API_KEY already exists in repository secrets!")),d8.default.createElement(v,{marginBottom:1},d8.default.createElement(P,null,"Would you like to:")),d8.default.createElement(v,{marginBottom:1},d8.default.createElement(P,null,A?SB("success",Y)("> "):"  ","Use the existing API key")),d8.default.createElement(v,{marginBottom:1},d8.default.createElement(P,null,!A?SB("success",Y)("> "):"  ","Create a new secret with a different name")),!A&&d8.default.createElement(d8.default.Fragment,null,d8.default.createElement(v,{marginBottom:1},d8.default.createElement(P,null,"Enter new secret name (alphanumeric with underscores):")),d8.default.createElement(C8,{value:B,onChange:D,onSubmit:I,focus:!0,placeholder:"e.g., CLAUDE_API_KEY",columns:F.columns,cursorOffset:G,onChangeCursorOffset:Z,showCursor:!0}))),d8.default.createElement(v,{marginLeft:3},d8.default.createElement(P,{dimColor:!0},"↑/↓ to select · Enter to continue")))}var SZ=Z1(U1(),1);function cv2({existingApiKey:A,useExistingKey:B,apiKey:Q,onApiKeyChange:D,onSubmit:I,onToggleUseExistingKey:G}){let[Z,F]=SZ.useState(0),Y=eB(),[W]=hB();return X0((C,J)=>{if(A){if(J.upArrow)G(!0);else if(J.downArrow)G(!1)}if(J.return)I()}),SZ.default.createElement(SZ.default.Fragment,null,SZ.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},SZ.default.createElement(v,{flexDirection:"column",marginBottom:1},SZ.default.createElement(P,{bold:!0},"Install GitHub App"),SZ.default.createElement(P,{dimColor:!0},"Choose API key")),A&&SZ.default.createElement(v,{marginBottom:1},SZ.default.createElement(P,null,B?SB("success",W)("> "):"  ","Use your existing Claude Code API key")),SZ.default.createElement(v,{marginBottom:1},SZ.default.createElement(P,null,!B||!A?SB("success",W)("> "):"  ","Enter a new API key")),(!B||!A)&&SZ.default.createElement(C8,{value:Q,onChange:D,onSubmit:I,onPaste:D,focus:!0,placeholder:"sk-ant… (Create a new key at https://console.anthropic.com/settings/keys)",mask:"*",columns:Y.columns,cursorOffset:Z,onChangeCursorOffset:F,showCursor:!0})),SZ.default.createElement(v,{marginLeft:3},SZ.default.createElement(P,{dimColor:!0},A?"↑/↓ to select · ":"","Enter to continue")))}var S$=Z1(U1(),1);function pv2({currentWorkflowInstallStep:A,secretExists:B,useExistingSecret:Q,secretName:D,skipWorkflow:I=!1,selectedWorkflows:G}){let Z=I?["Getting repository information",B&&Q?"Using existing API key secret":`Setting up ${D} secret`]:["Getting repository information","Creating branch",G.length>1?"Creating workflow files":"Creating workflow file",B&&Q?"Using existing API key secret":`Setting up ${D} secret`,"Opening pull request page"];return S$.default.createElement(S$.default.Fragment,null,S$.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},S$.default.createElement(v,{flexDirection:"column",marginBottom:1},S$.default.createElement(P,{bold:!0},"Install GitHub App"),S$.default.createElement(P,{dimColor:!0},"Create GitHub Actions workflow")),Z.map((F,Y)=>{let W="pending";if(Y<A)W="completed";else if(Y===A)W="in-progress";return S$.default.createElement(v,{key:Y},S$.default.createElement(P,{color:W==="completed"?"success":W==="in-progress"?"warning":void 0},W==="completed"?"✓ ":"",F,W==="in-progress"?"…":""))})))}var n3=Z1(U1(),1);function lv2({secretExists:A,useExistingSecret:B,secretName:Q,skipWorkflow:D=!1}){return n3.default.createElement(n3.default.Fragment,null,n3.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},n3.default.createElement(v,{flexDirection:"column",marginBottom:1},n3.default.createElement(P,{bold:!0},"Install GitHub App"),n3.default.createElement(P,{dimColor:!0},"Success")),!D&&n3.default.createElement(P,{color:"success"},"✓ GitHub Actions workflow created!"),A&&B&&n3.default.createElement(v,{marginTop:1},n3.default.createElement(P,{color:"success"},"✓ Using existing ANTHROPIC_API_KEY secret")),(!A||!B)&&n3.default.createElement(v,{marginTop:1},n3.default.createElement(P,{color:"success"},"✓ API key saved as ",Q," secret")),n3.default.createElement(v,{marginTop:1},n3.default.createElement(P,null,"Next steps:")),D?n3.default.createElement(n3.default.Fragment,null,n3.default.createElement(P,null,"1. Install the Claude GitHub App if you haven't already"),n3.default.createElement(P,null,"2. Your workflow file was kept unchanged"),n3.default.createElement(P,null,"3. API key is configured and ready to use")):n3.default.createElement(n3.default.Fragment,null,n3.default.createElement(P,null,"1. A pre-filled PR page has been created"),n3.default.createElement(P,null,"2. Install the Claude GitHub App if you haven't already"),n3.default.createElement(P,null,"3. Merge the PR to enable Claude PR assistance"))),n3.default.createElement(v,{marginLeft:3},n3.default.createElement(P,{dimColor:!0},"Press any key to exit")))}var r7=Z1(U1(),1);function iv2({error:A,errorReason:B,errorInstructions:Q}){return r7.default.createElement(r7.default.Fragment,null,r7.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},r7.default.createElement(v,{flexDirection:"column",marginBottom:1},r7.default.createElement(P,{bold:!0},"Install GitHub App"),r7.default.createElement(P,{dimColor:!0},"Error")),r7.default.createElement(P,{color:"error"},"Error: ",A),B&&r7.default.createElement(v,{marginTop:1},r7.default.createElement(P,{dimColor:!0},"Reason: ",B)),Q&&Q.length>0&&r7.default.createElement(v,{flexDirection:"column",marginTop:1},r7.default.createElement(P,{dimColor:!0},"How to fix:"),Q.map((D,I)=>r7.default.createElement(v,{key:I,marginLeft:2},r7.default.createElement(P,{dimColor:!0},"• "),r7.default.createElement(P,null,D)))),r7.default.createElement(v,{marginTop:1},r7.default.createElement(P,{dimColor:!0},"For manual setup instructions, see:"," ",r7.default.createElement(P,{color:"claude"},"https://github.com/anthropics/claude-code-action/#manual-setup-direct-api")))),r7.default.createElement(v,{marginLeft:3},r7.default.createElement(P,{dimColor:!0},"Press any key to exit")))}var YW=Z1(U1(),1);function nv2({repoName:A,onSelectAction:B}){return YW.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},YW.default.createElement(v,{flexDirection:"column",marginBottom:1},YW.default.createElement(P,{bold:!0},"Existing Workflow Found"),YW.default.createElement(P,{dimColor:!0},"Repository: ",A)),YW.default.createElement(v,{flexDirection:"column",marginBottom:1},YW.default.createElement(P,null,"A Claude workflow file already exists at"," ",YW.default.createElement(P,{color:"claude"},".github/workflows/claude.yml")),YW.default.createElement(P,{dimColor:!0},"What would you like to do?")),YW.default.createElement(v,{flexDirection:"column"},YW.default.createElement(p0,{options:[{label:"Update workflow file with latest version",value:"update"},{label:"Skip workflow update (configure secrets only)",value:"skip"},{label:"Exit without making changes",value:"exit"}],onChange:(G)=>{B(G)},onCancel:()=>{B("exit")}})),YW.default.createElement(v,{marginTop:1},YW.default.createElement(P,{dimColor:!0},"View the latest workflow template at:"," ",YW.default.createElement(P,{color:"claude"},"https://github.com/anthropics/claude-code-action/blob/main/examples/claude.yml"))))}var WW=Z1(U1(),1);function av2({warnings:A,onContinue:B}){return X0((Q,D)=>{if(D.return)B()}),WW.default.createElement(WW.default.Fragment,null,WW.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1},WW.default.createElement(v,{flexDirection:"column",marginBottom:1},WW.default.createElement(P,{bold:!0},oA.warning," Setup Warnings"),WW.default.createElement(P,{dimColor:!0},"We found some potential issues, but you can continue anyway")),A.map((Q,D)=>WW.default.createElement(v,{key:D,flexDirection:"column",marginBottom:1},WW.default.createElement(P,{color:"warning",bold:!0},Q.title),WW.default.createElement(P,null,Q.message),Q.instructions.length>0&&WW.default.createElement(v,{flexDirection:"column",marginLeft:2,marginTop:1},Q.instructions.map((I,G)=>WW.default.createElement(P,{key:G,dimColor:!0},"• ",I))))),WW.default.createElement(v,{marginTop:1},WW.default.createElement(P,{bold:!0,color:"permission"},"Press Enter to continue anyway, or Ctrl+C to exit and fix issues"))))}var b5=Z1(U1(),1);function rv2({onSubmit:A,defaultSelections:B}){let[Q,D]=b5.useState(new Set(B)),[I,G]=b5.useState(0),[Z,F]=b5.useState(!1),Y=[{value:"claude",label:"@Claude Code",description:"Tag @claude in issues and PR comments"},{value:"claude-review",label:"Claude Code Review",description:"Automated code review on new PRs"}];return X0((W,C)=>{if(C.upArrow)G((J)=>J>0?J-1:Y.length-1),F(!1);else if(C.downArrow)G((J)=>J<Y.length-1?J+1:0),F(!1);else if(W===" "){let J=Y[I]?.value;if(J)D((X)=>{let V=new Set(X);if(V.has(J))V.delete(J);else V.add(J);return V})}else if(C.return)if(Q.size===0)F(!0);else A(Array.from(Q))}),b5.default.createElement(b5.default.Fragment,null,b5.default.createElement(v,{flexDirection:"column",borderStyle:"round",borderColor:"secondaryBorder",paddingX:1,width:"100%"},b5.default.createElement(v,{flexDirection:"column",marginBottom:1},b5.default.createElement(P,{bold:!0},"Select GitHub workflows to install"),b5.default.createElement(P,{dimColor:!0},"We'll create a workflow file in your repository for each one you select.")),b5.default.createElement(v,{flexDirection:"column",paddingX:1},Y.map((W,C)=>{let J=Q.has(W.value),X=C===I;return b5.default.createElement(v,{key:W.value,flexDirection:"row",marginBottom:C<Y.length-1?1:0},b5.default.createElement(v,{marginRight:1,minWidth:2},b5.default.createElement(P,{bold:X},J?"✓":" ")),b5.default.createElement(v,{flexDirection:"column"},b5.default.createElement(P,{bold:X},W.label),b5.default.createElement(P,{dimColor:!0},W.description)))}))),b5.default.createElement(v,{marginLeft:2},b5.default.createElement(P,{dimColor:!0},"↑↓ Navigate · Space to toggle · Enter to confirm")),Z&&b5.default.createElement(v,{marginLeft:1},b5.default.createElement(P,{color:"error"},"You must select at least one workflow to continue")))}var sv2="Add Claude Code GitHub Workflow",ov2=`name: Claude Code
cli.js:`));else B();break;case"select-matcher":G({mode:"select-event"});break;case"add-matcher":if("event"in I)G({mode:"select-matcher",event:I.event,matcherMetadata:I.matcherMetadata});J("");break;case"delete-matcher":if("event"in I)G({mode:"select-matcher",event:I.event,matcherMetadata:I.matcherMetadata});break;case"select-hook":if("event"in I){let e=j$(I.event,w);if(e!==void 0)G({mode:"select-matcher",event:I.event,matcherMetadata:e});else G({mode:"select-event"})}break;case"add-hook":if("event"in I&&"matcher"in I)G({mode:"select-hook",event:I.event,matcher:I.matcher});W("");break;case"delete-hook":if("event"in I&&I.mode==="delete-hook"){let{hook:e}=I;G({mode:"select-hook",event:I.event,matcher:e.matcher||""})}break}return}switch(X){case"select-event":if(Q1.return){let e=V,f=j$(e,w);if(f!==void 0)G({mode:"select-matcher",event:e,matcherMetadata:f});else G({mode:"select-hook",event:e,matcher:""})}break;case"add-matcher":if(Q1.return&&C.trim()&&"event"in I)G({mode:"select-hook",event:I.event,matcher:C.trim()});break;case"add-hook":if(Q1.return&&Y.trim()&&"event"in I&&"matcher"in I){let e={event:I.event,config:{type:"command",command:Y.trim()},matcher:j$(I.event,w)!==void 0?I.matcher:""};G({mode:"save-hook",event:I.event,hookToSave:e})}break;case"delete-matcher":case"delete-hook":case"select-matcher":case"select-hook":break}});let L=NI.useCallback(()=>{if(I.mode==="save-hook"){let{hookToSave:u}=I;D((Q1)=>[...Q1,`Added ${u.event} hook: ${XA.bold(u.config.command)}`]),G({mode:"select-hook",event:u.event,matcher:u.matcher})}W(""),F((u)=>u+1)},[I]),S=NI.useCallback(()=>{if(I.mode==="save-hook"){let{hookToSave:u}=I;G({mode:"select-hook",event:u.event,matcher:u.matcher})}W("")},[I]),j=NI.useCallback(async()=>{if(I.mode!=="delete-hook")return;let{hook:u,event:Q1}=I;await rb2(u),D((t)=>[...t,`Deleted ${u.event} hook: ${XA.bold(u.config.command)}`]),F((t)=>t+1);let e=u.matcher||"",f=q[Q1]?.[e]?.filter((t)=>t.config.command!==u.config.command);if(!f||f.length===0){let t=j$(Q1,w);if(t!==void 0)G({mode:"select-matcher",event:Q1,matcherMetadata:t});else G({mode:"select-event"})}else G({mode:"select-hook",event:Q1,matcher:e})},[I,q,w]),d=NI.useCallback(()=>{if(I.mode==="delete-matcher"){let{matcher:u,event:Q1}=I;D((e)=>[...e,`Deleted matcher: ${XA.bold(u)}`]),G({mode:"select-matcher",event:Q1,matcherMetadata:I.matcherMetadata})}},[I]),y=Q21(w),a=qO2();switch(NI.useEffect(()=>{uA1()},[]),I.mode){case"save-hook":return RG.createElement(Ag2,{event:I.hookToSave.event,eventSummary:y[I.hookToSave.event].summary,config:I.hookToSave.config,matcher:I.hookToSave.matcher,onSuccess:L,onCancel:S});case"select-event":return RG.createElement(Bg2,{hookEventMetadata:y,exitStatePending:O.pending,exitStateKeyName:O.keyName||void 0,configDifference:a,onSelectEvent:(u)=>{let Q1=j$(u,w);if(Q1!==void 0)G({mode:"select-matcher",event:u,matcherMetadata:Q1});else G({mode:"select-hook",event:u,matcher:""})}});case"select-matcher":return RG.createElement(Qg2,{selectedEvent:I.event,matchersForSelectedEvent:R,hooksByEventAndMatcher:q,eventDescription:y[I.event].description,onSelect:(u)=>{if(u===null)G({mode:"add-matcher",event:I.event,matcherMetadata:I.matcherMetadata});else if((q[I.event]?.[u]||[]).length===0)G({mode:"delete-matcher",event:I.event,matcher:u,matcherMetadata:I.matcherMetadata});else G({mode:"select-hook",event:I.event,matcher:u})},onCancel:()=>{G({mode:"select-event"})}});case"add-matcher":return RG.createElement(Dg2,{selectedEvent:I.event,newMatcher:C,onChangeNewMatcher:J,eventDescription:y[I.event].description,matcherMetadata:I.matcherMetadata});case"delete-matcher":return RG.createElement(Gg2,{selectedMatcher:I.matcher,selectedEvent:I.event,onDelete:d,onCancel:()=>G({mode:"select-matcher",event:I.event,matcherMetadata:I.matcherMetadata})});case"select-hook":return RG.createElement(Zg2,{selectedEvent:I.event,selectedMatcher:I.matcher,hooksForSelectedMatcher:M,hookEventMetadata:y[I.event],onSelect:(u)=>{if(u===null)G({mode:"add-hook",event:I.event,matcher:I.matcher});else G({mode:"delete-hook",event:I.event,hook:u})},onCancel:()=>{let u=j$(I.event,w);if(u!==void 0)G({mode:"select-matcher",event:I.event,matcherMetadata:u});else G({mode:"select-event"})}});case"add-hook":return RG.createElement(Ig2,{selectedEvent:I.event,selectedMatcher:I.matcher,eventDescription:Jg2(I.event,w),fullDescription:y[I.event].description,supportsMatcher:j$(I.event,w)!==void 0,command:Y,onChangeCommand:W});case"delete-hook":return RG.createElement(Fg2,{selectedHook:I.hook,eventSupportsMatcher:j$(I.event,w)!==void 0,onDelete:j,onCancel:()=>{let{event:u,hook:Q1}=I;G({mode:"select-hook",event:u,matcher:Q1.matcher||""})}})}}var L9=Z1(U1(),1);var Tw1={HIGHEST:31999,MIDDLE:1e4,BASIC:4000,NONE:0},Bk6={english:{HIGHEST:[{pattern:"think harder",needsWordBoundary:!0},{pattern:"think intensely",needsWordBoundary:!0},{pattern:"think longer",needsWordBoundary:!0},{pattern:"think really hard",needsWordBoundary:!0},{pattern:"think super hard",needsWordBoundary:!0},{pattern:"think very hard",needsWordBoundary:!0},{pattern:"ultrathink",needsWordBoundary:!0}],MIDDLE:[{pattern:"think about it",needsWordBoundary:!0},{pattern:"think a lot",needsWordBoundary:!0},{pattern:"think deeply",needsWordBoundary:!0},{pattern:"think hard",needsWordBoundary:!0},{pattern:"think more",needsWordBoundary:!0},{pattern:"megathink",needsWordBoundary:!0}],BASIC:[{pattern:"think",needsWordBoundary:!0}],NONE:[]},japanese:{HIGHEST:[{pattern:"熟考"},{pattern:"深く考えて"},{pattern:"しっかり考えて"}],MIDDLE:[{pattern:"もっと考えて"},{pattern:"たくさん考えて"},{pattern:"よく考えて"},{pattern:"長考"}],BASIC:[{pattern:"考えて"}],NONE:[]},chinese:{HIGHEST:[{pattern:"多想一会"},{pattern:"深思"},{pattern:"仔细思考"}],MIDDLE:[{pattern:"多想想"},{pattern:"好好想"}],BASIC:[{pattern:"想"},{pattern:"思考"}],NONE:[]},spanish:{HIGHEST:[{pattern:"piensa más",needsWordBoundary:!0},{pattern:"piensa mucho",needsWordBoundary:!0},{pattern:"piensa profundamente",needsWordBoundary:!0}],MIDDLE:[{pattern:"piensa",needsWordBoundary:!0}],BASIC:[{pattern:"pienso",needsWordBoundary:!0},{pattern:"pensando",needsWordBoundary:!0}],NONE:[]},french:{HIGHEST:[{pattern:"réfléchis plus",needsWordBoundary:!0},{pattern:"réfléchis beaucoup",needsWordBoundary:!0},{pattern:"réfléchis profondément",needsWordBoundary:!0}],MIDDLE:[{pattern:"réfléchis",needsWordBoundary:!0}],BASIC:[{pattern:"pense",needsWordBoundary:!0},{pattern:"réfléchir",needsWordBoundary:!0}],NONE:[]},german:{HIGHEST:[{pattern:"denk mehr",needsWordBoundary:!0},{pattern:"denk gründlich",needsWordBoundary:!0},{pattern:"denk tief",needsWordBoundary:!0}],MIDDLE:[{pattern:"denk nach",needsWordBoundary:!0},{pattern:"denk",needsWordBoundary:!0}],BASIC:[{pattern:"denke",needsWordBoundary:!0},{pattern:"nachdenken",needsWordBoundary:!0}],NONE:[]},korean:{HIGHEST:[{pattern:"더 오래 생각"},{pattern:"깊이 생각"},{pattern:"심사숙고"},{pattern:"곰곰이 생각"}],MIDDLE:[{pattern:"많이 생각"},{pattern:"더 생각"},{pattern:"잘 생각"}],BASIC:[{pattern:"생각"}],NONE:[]},italian:{HIGHEST:[{pattern:"pensa di più",needsWordBoundary:!0},{pattern:"pensa a lungo",needsWordBoundary:!0},{pattern:"pensa profondamente",needsWordBoundary:!0},{pattern:"rifletti a fondo",needsWordBoundary:!0}],MIDDLE:[{pattern:"pensa",needsWordBoundary:!0},{pattern:"pensa molto",needsWordBoundary:!0},{pattern:"rifletti",needsWordBoundary:!0}],BASIC:[{pattern:"penso",needsWordBoundary:!0},{pattern:"pensare",needsWordBoundary:!0},{pattern:"pensando",needsWordBoundary:!0},{pattern:"riflettere",needsWordBoundary:!0}],NONE:[]}};function y$(A,B){if(process.env.MAX_THINKING_TOKENS){let Q=parseInt(process.env.MAX_THINKING_TOKENS,10);if(Q>0)E1("tengu_thinking",{provider:bH(),tokenCount:Q});return Q}return Math.max(...A.filter((Q)=>Q.type==="user"&&!Q.isMeta).map(Qk6),B??0)}function Qk6(A){if(A.isMeta)return 0;let B=Dk6(A).toLowerCase(),Q=Ik6(B);if(Q>0)E1("tengu_thinking",{provider:bH(),tokenCount:Q});return Q}function Dk6(A){if(typeof A.message.content==="string")return A.message.content;return A.message.content.map((B)=>B.type==="text"?B.text:"").join("")}function Ik6(A){let B=[["HIGHEST",Tw1.HIGHEST],["MIDDLE",Tw1.MIDDLE],["BASIC",Tw1.BASIC]];for(let[Q,D]of B)if(Gk6(A,Q))return D;return Tw1.NONE}function Gk6(A,B){for(let Q of Object.values(Bk6)){let D=Q[B];for(let{pattern:I,needsWordBoundary:G}of D)if((G?new RegExp(`\\b${I}\\b`):new RegExp(I)).test(A))return!0}return!1}async function Vg2(A){return`Launch a new agent that has access to the following tools: ${A.filter((Q)=>Q.name!==yY).map((Q)=>Q.name).join(", ")}. When you are searching for a keyword or file and are not confident that you will find the right match in the first few tries, use the Agent tool to perform the search for you.
